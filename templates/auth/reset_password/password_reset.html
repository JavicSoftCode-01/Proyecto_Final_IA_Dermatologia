{% load static %}
 <!-- Favicon -->
  <link rel="shortcut icon" href="{% static 'img/icon_dermIA.png' %}" type="image/x-icon">
    <!-- Título dinámico de la página -->
    <title>
        {% block title %}
            {{ page_title }} - {{ app_name }}
        {% endblock %}
    </title>

<!-- Bloque para estilos adicionales -->
{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/auth.css' %}"/>
{% endblock %}

{% block content %}
  <div class="auth-container">
    <!-- Panel del logo -->
    <div class="logo-panel">
      <div class="logo-container">
        <img src="{% static 'img/portada.png' %}"
             alt="DermaIA Logo"
             class="logo"/>
      </div>
    </div>

    <!-- Tarjeta de autenticación -->
    <div class="auth-card">
      <!-- Formulario de restablecimiento de contraseña -->
      <form method="post" class="auth-form">
        {% csrf_token %}

        <!-- Encabezados -->
        <h2>Has olvidado tu contraseña</h2>
        <h3>Por favor ingrese su correo de usuario para restablecer la contraseña</h3>

        <!-- Campo de correo electrónico -->
        <div class="form-group">
          <label for="email">Correo Electrónico</label>
          <input type="email"
                 name="email"
                 id="email"
                 placeholder="Ingrese su correo electrónico"
                 required/>
        </div>

        <!-- Botón de envío -->
        <button type="submit" class="btn-auth">
          Enviar Restablecimiento
        </button>

        <!-- Enlaces de navegación -->
        <div class="auth-links">
          <a href="{% url 'auth:login' %}">Volver a Inicia sesión</a>
        </div>
      </form>
    </div>
  </div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
  const emailInput = document.getElementById('email');
  function validateEmail(value) {
    const trimmedValue = value.trim();
    if (!trimmedValue) {
      return "El campo está vacío, por favor rellénelo.";
    }
    if (trimmedValue.length > 254) {
      return "El correo electrónico no puede tener más de 254 caracteres.";
    }
    const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
    if (!emailRegex.test(trimmedValue)) {
      return "Ingrese un correo electrónico válido.";
    }
    return null;
  }
  function createErrorMessage(input, message) {
    removeErrorMessage(input);
    const errorDiv = document.createElement('div');
    errorDiv.className = 'error-message';
    errorDiv.textContent = message;
    input.parentNode.appendChild(errorDiv);
    input.classList.add('error');
  }
  function removeErrorMessage(input) {
    const errorMsg = input.parentNode.querySelector('.error-message');
    if (errorMsg) errorMsg.remove();
    input.classList.remove('error');
  }
  if (emailInput) {
    emailInput.addEventListener('blur', function() {
      const error = validateEmail(this.value);
      if (error) {
        createErrorMessage(this, error);
      } else {
        removeErrorMessage(this);
      }
    });
  }
});
</script>
{% endblock %}
